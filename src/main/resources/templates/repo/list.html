<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	layout:decorator="layouts/main">
<head>
<title>Dareon: Repositories</title>

<link rel="stylesheet"
	href="https://cdn.datatables.net/1.10.12/css/jquery.dataTables.min.css" />
<script
	src="https://cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js"></script>
</head>
<body>

	<div layout:fragment="content">



		<div class="col-lg-12">
			<h1 class="page-header">
				Repositories <a href="/repo/create" class="btn btn-danger btn-lg"
					role="button">Create a Repository</a>
			</h1>


			<table class="table table-hover table-responsive" id="repoTable">
				<thead>
					<tr>
						<th style="text-align: center">Title</th>
						<th style="text-align: center">Created On</th>
						<th style="text-align: center">Creator</th>
						<th style="text-align: center">Owner</th>
						<th style="text-align: center">Action</th>
					</tr>
				</thead>
				<tbody>
					<th:block th:each="repo : ${repos}">
						<tr>
							<td style="text-align: center" th:text="${repo.title}" />
							<td style="text-align: center"
								th:text="${#calendars.format(repo.createdOn,'M/dd/yyyy hh:mm:ss a')}" />
							<td style="text-align: center;cursor:pointer"  onclick="location.href='/repo/create'"
									th:text="|${repo.creator.firstName} ${repo.creator.lastName}|"/>
							<th:block th:if="${repo.owner} != null">
								<td style="text-align: center;cursor:pointer"  onclick="location.href='/repo/create'"
									th:text="|${repo.creator.firstName} ${repo.creator.lastName}|"/>
							</th:block>
							<th:block th:if="${repo.owner} == null">
								<td style="text-align: center">Not assigned</td>
							</th:block>
							<td style="text-align: center">
								<div class="btn-group btn-group-sm">
									<a th:href="|@{/repo/read/}${repo.title}|"
										class="btn btn-default">View</a> <a
										th:href="|@{/repo/edit/}${repo.title}|"
										class="btn btn-default">Edit</a> <a
										th:href="|@{/repo/edit/}${repo.title}|"
										class="btn btn-default">Delete</a> <a
										th:href="|@{/callforproposals/create/}${repo.title}|"
										class="btn btn-primary">Create CFP</a>
								</div>
							</td>

						</tr>
					</th:block>
				</tbody>

			</table>




			<script>
				$(document).ready(function() {
					$('#repoTable').DataTable()
				});
			</script>
			<p th:if="${repos.size() == 0}">
			<div class="alert alert-warning" role="alert">No Repositories
				Found.</div>
			</p>

		</div>

	</div>

</body>
</html>